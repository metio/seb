<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://gohugo.io/" version="0.128.0">Hugo</generator><title type="html">Automation on Sebastian Ho√ü</title><link href="https://seb.xn--ho-hia.de/tags/automation/" rel="alternate" type="text/html" title="html"/><link href="https://seb.xn--ho-hia.de/tags/automation/index.xml" rel="alternate" type="application/rss+xml" title="rss"/><link href="https://seb.xn--ho-hia.de/tags/automation/atom.xml" rel="self" type="application/atom+xml" title="atom"/><updated>2024-07-01T02:33:53+00:00</updated><id>https://seb.xn--ho-hia.de/tags/automation/</id><entry><title type="html">chezmoi auto-update</title><link href="https://seb.xn--ho-hia.de/posts/chezmoi-auto-update/?utm_source=atom_feed" rel="alternate" type="text/html"/><link href="https://seb.xn--ho-hia.de/posts/shell-init/?utm_source=atom_feed" rel="related" type="text/html" title="chezmoi &amp; shell init scripts"/><link href="https://seb.xn--ho-hia.de/posts/chezmoi-maintenance/?utm_source=atom_feed" rel="related" type="text/html" title="Maintaining dotfiles with chezmoi"/><link href="https://seb.xn--ho-hia.de/posts/chezmoi-gpg/?utm_source=atom_feed" rel="related" type="text/html" title="Encrypt dotfiles with chezmoi"/><link href="https://seb.xn--ho-hia.de/posts/chezmoi-auto-git/?utm_source=atom_feed" rel="related" type="text/html" title="Manage dotfiles with chezmoi and git"/><link href="https://seb.xn--ho-hia.de/posts/xdg-dot-files/?utm_source=atom_feed" rel="related" type="text/html" title="XDG Base Directory Specification"/><id>https://seb.xn--ho-hia.de/posts/chezmoi-auto-update/</id><published>2022-12-26T00:00:00+00:00</published><updated>2023-01-06T17:32:06+01:00</updated><content type="html"><![CDATA[<p>To automatically synchronize dotfiles across my computers, I&rsquo;ve written the following <code>systemd</code> unit:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-systemd" data-lang="systemd"><span class="line"><span class="cl"><span class="k">[Unit]</span>
</span></span><span class="line"><span class="cl"><span class="na">Description</span><span class="o">=</span><span class="s">Update chezmoi managed dotfiles</span>
</span></span><span class="line"><span class="cl"><span class="na">After</span><span class="o">=</span><span class="s">network-online.target</span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span><span class="o">=</span><span class="s">network-online.target</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span><span class="o">=</span><span class="s">oneshot</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/chezmoi update --no-tty --force</span>
</span></span><span class="line"><span class="cl"><span class="na">RemainAfterExit</span><span class="o">=</span><span class="s">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Install]</span>
</span></span><span class="line"><span class="cl"><span class="na">WantedBy</span><span class="o">=</span><span class="s">default.target</span>
</span></span></code></pre></div><p>This unit pulls changes from upstream first and then applies the changes to the current computer after I&rsquo;m logged in and a network connection is available. The <code>--no-tty</code> flag is required because there is no tty when systemd executes <code>chezmoi</code>. Likewise, the <code>--force</code> flag ensures that no interactive prompt will be displayed which we cannot answer since <code>systemd</code> is executing this unit without us being involved.</p>
]]></content><category scheme="https://seb.xn--ho-hia.de/categories/snippet" term="snippet" label="snippet"/><category scheme="https://seb.xn--ho-hia.de/tags/chezmoi" term="chezmoi" label="chezmoi"/><category scheme="https://seb.xn--ho-hia.de/tags/dotfiles" term="dotfiles" label="dotfiles"/><category scheme="https://seb.xn--ho-hia.de/tags/automation" term="automation" label="automation"/></entry></feed>